@page "/persons"
@using Telerik.FontIcons

@attribute [Microsoft.AspNetCore.Authorization.Authorize
(CustomerVehicleManagement.Shared.Policies.CanManageHumanResources)]

<div class="container">
    <div class="h5">Persons</div>

    @if (PersonFormMode != FormMode.Add && PersonFormMode != FormMode.Edit)
    {
        @if (Persons != null)
        {
            <div class="pb-3">
                <TelerikButton OnClick="Add"
                               ThemeColor="primary"
                               Icon="@FontIcon.Plus"
                               title="Add New Person">
                    Add Person
                </TelerikButton>
            </div>

            <PersonsGrid Persons="Persons"
                         OnRowClicked="@EditAsync" />
        }
    }

    @if ((PersonFormMode == FormMode.Add || PersonFormMode == FormMode.Edit) && PersonToWrite != null)
    {
        <PersonContactableEditor Person="PersonToWrite"
                                 FormMode="PersonFormMode"
                                 Save="SubmitHandlerAsync"
                                 Close="EndAddEditAsync"/>
    }
</div>
<style>
    .dialog-button {
        margin-right: 0.7rem;
    }
</style>